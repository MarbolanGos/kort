<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Kort-view-bugmap-fix-Form'>/**
</span> * Answer form for fix view
 */
Ext.define('Kort.view.bugmap.fix.Form', {
	extend: 'Ext.Container',
	alias: 'widget.fixform',
    requires: [
        'Ext.form.Panel',
        'Ext.Button',
        'Ext.field.Select',
        'Ext.field.Number',
        'Ext.field.Text',
        'Kort.view.bugmap.fix.type.Select'
    ],
    
	config: {
<span id='Kort-view-bugmap-fix-Form-cfg-layout'>		layout: 'vbox',
</span><span id='Kort-view-bugmap-fix-Form-cfg-cls'>        cls: 'fixform',
</span><span id='Kort-view-bugmap-fix-Form-cfg-scrollable'>        scrollable: true,
</span><span id='Kort-view-bugmap-fix-Form-cfg-title'>        title: Ext.i18n.Bundle.message('fix.form.title'),
</span><span id='Kort-view-bugmap-fix-Form-cfg-fullscreen'>        fullscreen: true
</span>	},
    
<span id='Kort-view-bugmap-fix-Form-method-initialize'>    initialize: function () {
</span>        var fixContentComponent,
            fixFormPanel,
            fixField;
        
        this.callParent(arguments);
        
        fixContentComponent = {
            xtype: 'component',
            cls: 'fixContentComponent',
            record: this.getRecord(),
            tpl:    new Ext.Template(
                        '&lt;div class=&quot;fix-content&quot;&gt;',
                            '&lt;div class=&quot;textpic&quot;&gt;',
                                '&lt;div class=&quot;image&quot;&gt;',
                                    '&lt;img class=&quot;koin-image&quot; src=&quot;./resources/images/koins/koin_no_value.png&quot; /&gt;',
                                '&lt;/div&gt;',
                                '&lt;div class=&quot;content&quot;&gt;',
                                    '&lt;p&gt;',
                                        Ext.i18n.Bundle.message('fix.form.koins.earn'),
                                        ' &lt;span class=&quot;important&quot;&gt;{fix_koin_count}&lt;/span&gt; ',
                                        Ext.i18n.Bundle.message('fix.form.koins.name'),
                                    '&lt;/p&gt;',
                                '&lt;/div&gt;',
                            '&lt;/div&gt;',
                            '&lt;div class=&quot;textpic&quot;&gt;',
                                '&lt;div class=&quot;image&quot;&gt;',
                                    '&lt;img class=&quot;bugtype-image&quot; src=&quot;./resources/images/marker_icons/{type}.png&quot; /&gt;',
                                '&lt;/div&gt;',
                                '&lt;div class=&quot;content&quot;&gt;',
                                    '&lt;p&gt;{description}&lt;/p&gt;',
                                '&lt;/div&gt;',
                            '&lt;/div&gt;',
                        '&lt;/div&gt;'
                    )
        };
        
        fixField = this.createFixField(this.getRecord());
        
        fixFormPanel = {
            xtype: 'formpanel',
            cls: 'fixFormPanel',
            scrollable: false,
            flex: 1,
            items: [
                fixField,
                {
                    xtype: 'button',
                    cls: 'fixSubmitButton',
                    ui: 'confirm',
                    id: 'fixFormSubmitButton',
                    text: Ext.i18n.Bundle.message('fix.form.button.submit')
                }
            ]
        };
        
        this.add([fixContentComponent, fixFormPanel]);
    },
    
<span id='Kort-view-bugmap-fix-Form-method-createFixField'>    createFixField: function(bug) {
</span>        var fixField,
            fieldConfig = {
                name: 'fixfield',
                cls: 'fixfield'
            };
        
        if(bug.get('view_type') === 'select') {
            fieldConfig = Ext.merge(fieldConfig, {
                type: bug.get('type')
            });
            
            fixField = Ext.create('Kort.view.bugmap.fix.type.Select', fieldConfig);
        } else if(bug.get('view_type') === 'number') {
            fixField = Ext.create('Ext.field.Number', fieldConfig);
        } else {
            fixField = Ext.create('Ext.field.Text', fieldConfig);
        }
        
        fixField.setPlaceHolder(this.getRecord().get('answer_placeholder'));
        
        return fixField;
    }
});
</pre>
</body>
</html>
