<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">Ext.define('Kort.view.profile.BadgesCarousel', {
	extend: 'Ext.Carousel',
	alias: 'widget.badgescarousel',
	
	config: {
        flex: 1,
        cls: 'profileBadgesCarousel',
        selectedBadgeIndex: 0,
        itemTpl: new Ext.XTemplate(
                    '&lt;div class=&quot;carouselitem-content&quot;&gt;' +
                        '&lt;h1 class=&quot;badge-title&quot;&gt;{title}&lt;/h1&gt;' +
                        '&lt;img class=&quot;badge-image&quot; src=&quot;./resources/images/badges/&lt;tpl if=&quot;won&quot;&gt;{name}&lt;tpl else&gt;locked&lt;/tpl&gt;.png&quot; /&gt;' +
                        '&lt;p class=&quot;badge-description&quot;&gt;{description}&lt;/p&gt;' +
                    '&lt;/div&gt;'
                )
	},
    
    initialize: function() {
        this.callParent(arguments);
        
        var me = this,
            userBadgesStore = Ext.getStore('UserBadges');
        
        userBadgesStore.each(function (badge, index, length) {
            var component = {
                xtype: 'component',
                html: me.getItemTpl().apply(badge.data)
            };
            // if user owns badge set badge background color
            if(badge.get('won')) {
                component.style = {
                    'background-color': badge.get('color')
                };
            }
            
            me.add(component);
        });
        // show choosen badge
        me.setActiveItem(me.getSelectedBadgeIndex());
    }
});</pre>
</body>
</html>
